services:
  - type: web
    name: clerk-docket-piscataway
    runtime: node
    plan: starter
    buildCommand: npm ci && npm run build && cp -r public .next/standalone/public && cp -r .next/static .next/standalone/.next/static
    startCommand: node .next/standalone/server.js
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: "3000"
      - key: HOSTNAME
        value: "0.0.0.0"
      - key: DATABASE_PATH
        value: /data/docket.db
      - key: GMAIL_CLIENT_ID
        sync: false
      - key: GMAIL_CLIENT_SECRET
        sync: false
      - key: GMAIL_REDIRECT_URI
        sync: false
      - key: ANTHROPIC_API_KEY
        sync: false
      - key: LOGIN_PASSWORD
        sync: false
      - key: INGEST_API_KEY
        sync: false
      - key: CRON_SECRET
        sync: false
    disk:
      name: docket-data-piscataway
      mountPath: /data
      sizeGB: 1
